<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>NGX JSOLN Schema Form</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/material.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">NGX JSOLN Schema Form</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>LayoutService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>projects/ngx-json-schema-form/src/lib/layout.service.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Provides services for handling layouts </p>

            </p>



            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>






                    <tr>
                        <td class="col-md-4">
                            <h6><b>Accessors</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                    <a href="#layout">layout</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
        </tbody>
    </table>
</section>




            <section>
    <h3 id="accessors">
        Accessors
    </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="layout"></a>
                        <span class="name"><b>layout</b><a href="#layout"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>layout()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="17" class="link-to-prism">projects/ngx-json-schema-form/src/lib/layout.service.ts:17</a></div>
                                </td>
                            </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>set</b><code>layout(value)</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="14" class="link-to-prism">projects/ngx-json-schema-form/src/lib/layout.service.ts:14</a></div>
                                </td>
                            </tr>
                    <tr>
                        <td class="col-md-4">

                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <table class="params">
                                            <thead>
                                                <tr>
                                                    <td>Name</td>
                                                    <td>Optional</td>
                                                        <td>Description</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                    <tr>
                                                            <td>value</td>
                                                    
                                                    
                                                        <td>
                                                                No
                                                        </td>
                                                        
                                                            <td>
                                                                    <code><ul>
<li>List of layout Items to be displayed in the UI</li>
</ul>
</code>
                                                            </td>
                                                    </tr>
                                            </tbody>
                                        </table>
                                </div>
                                <div>
                                </div>
                                <div class="io-description">
                                    <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                                </div>
                        </td>
                    </tr>
            </tbody>
        </table>
</section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;

import { clone, pick, uniqueId } from &#x27;lodash&#x27;;

import { LayoutItem } from &#x27;./layout-item.data&#x27;;

/** Provides services for handling layouts */
@Injectable()
export class LayoutService {
    private _layout: Array&lt;any&gt; &#x3D; [];
    /**
     * @param value - List of layout Items to be displayed in the UI
     */
    set layout(value: Array&lt;any&gt;) {
        this._layout &#x3D; LayoutService.buildLayout(value);
    }
    get layout(): Array&lt;any&gt; {
        return this._layout;
    }

    private static buildLayout(layout: Array&lt;LayoutItem&gt;): Array&lt;LayoutItem&gt; {
        // let hasSubmitButton &#x3D; !JsonPointer.get(jsf, &#x27;/formOptions/addSubmit&#x27;);
        const formLayout: Array&lt;LayoutItem&gt; &#x3D; LayoutService.mapLayout(layout, (layoutItem, index, layoutPointer) &#x3D;&gt; {
            const newNode: LayoutItem &#x3D; {
                id: uniqueId(),
                options: {},
                ...pick(layoutItem, [&#x27;key&#x27;, &#x27;type&#x27;, &#x27;name&#x27;])
            };
            // Dropped code to push invalid props into options
            // Dropped code to convert widget to type
            // Dropped code to convert options.legend to options.title

            return newNode;
    // if (isObject(layoutItem)) {

    //   if (!hasOwn(newNode.options, &#x27;validationMessages&#x27;)) {
    //     if (hasOwn(newNode.options, &#x27;errorMessages&#x27;)) {
    //       newNode.options.validationMessages &#x3D; newNode.options.errorMessages;
    //       delete newNode.options.errorMessages;

    //     // Convert Angular Schema Form (AngularJS) &#x27;validationMessage&#x27; to
    //     // Angular JSON Schema Form &#x27;validationMessages&#x27;
    //     // TV4 codes from https://github.com/geraintluff/tv4/blob/master/source/api.js
    //     } else if (hasOwn(newNode.options, &#x27;validationMessage&#x27;)) {
    //       if (typeof newNode.options.validationMessage &#x3D;&#x3D;&#x3D; &#x27;string&#x27;) {
    //         newNode.options.validationMessages &#x3D; newNode.options.validationMessage;
    //       } else {
    //         newNode.options.validationMessages &#x3D; {};
    //         Object.keys(newNode.options.validationMessage).forEach(key &#x3D;&gt; {
    //           const code &#x3D; key + &#x27;&#x27;;
    //           const newKey &#x3D;
    //             code &#x3D;&#x3D;&#x3D;  &#x27;0&#x27;  ? &#x27;type&#x27; :
    //             code &#x3D;&#x3D;&#x3D;  &#x27;1&#x27;  ? &#x27;enum&#x27; :
    //             code &#x3D;&#x3D;&#x3D; &#x27;100&#x27; ? &#x27;multipleOf&#x27; :
    //             code &#x3D;&#x3D;&#x3D; &#x27;101&#x27; ? &#x27;minimum&#x27; :
    //             code &#x3D;&#x3D;&#x3D; &#x27;102&#x27; ? &#x27;exclusiveMinimum&#x27; :
    //             code &#x3D;&#x3D;&#x3D; &#x27;103&#x27; ? &#x27;maximum&#x27; :
    //             code &#x3D;&#x3D;&#x3D; &#x27;104&#x27; ? &#x27;exclusiveMaximum&#x27; :
    //             code &#x3D;&#x3D;&#x3D; &#x27;200&#x27; ? &#x27;minLength&#x27; :
    //             code &#x3D;&#x3D;&#x3D; &#x27;201&#x27; ? &#x27;maxLength&#x27; :
    //             code &#x3D;&#x3D;&#x3D; &#x27;202&#x27; ? &#x27;pattern&#x27; :
    //             code &#x3D;&#x3D;&#x3D; &#x27;300&#x27; ? &#x27;minProperties&#x27; :
    //             code &#x3D;&#x3D;&#x3D; &#x27;301&#x27; ? &#x27;maxProperties&#x27; :
    //             code &#x3D;&#x3D;&#x3D; &#x27;302&#x27; ? &#x27;required&#x27; :
    //             code &#x3D;&#x3D;&#x3D; &#x27;304&#x27; ? &#x27;dependencies&#x27; :
    //             code &#x3D;&#x3D;&#x3D; &#x27;400&#x27; ? &#x27;minItems&#x27; :
    //             code &#x3D;&#x3D;&#x3D; &#x27;401&#x27; ? &#x27;maxItems&#x27; :
    //             code &#x3D;&#x3D;&#x3D; &#x27;402&#x27; ? &#x27;uniqueItems&#x27; :
    //             code &#x3D;&#x3D;&#x3D; &#x27;500&#x27; ? &#x27;format&#x27; : code + &#x27;&#x27;;
    //           newNode.options.validationMessages[newKey] &#x3D; newNode.options.validationMessage[key];
    //         });
    //       }
    //       delete newNode.options.validationMessage;
    //     }
    //   }
    // } else if (JsonPointer.isJsonPointer(layoutItem)) {
    //   newNode.dataPointer &#x3D; layoutItem;
    // } else if (isString(layoutItem)) {
    //   newNode.key &#x3D; layoutItem;
    // } else {
    //   console.error(&#x27;buildLayout error: Form layout element not recognized:&#x27;);
    //   console.error(layoutItem);
    //   return null;
    // }
        });

        return formLayout;
    }

    /**
     * &#x27;mapLayout&#x27; function
     *
     * Creates a new layout by running each element in an existing layout through
     * an iteratee. Recursively maps within array elements &#x27;items&#x27; and &#x27;tabs&#x27;.
     * The iteratee is invoked with four arguments: (value, index, layout, path)
     *
     * The returned layout may be longer (or shorter) then the source layout.
     *
     * If an item from the source layout returns multiple items (as &#x27;*&#x27; usually will),
     * this function will keep all returned items in-line with the surrounding items.
     *
     * If an item from the source layout causes an error and returns null, it is
     * skipped without error, and the function will still return all non-null items.
     *
     * @param  layout - the layout to map
     * @param  function - the funciton to invoke on each element
     * @param  layoutPointer - the layoutPointer to layout, inside rootLayout
     * @param  rootLayout - the root layout, which conatins layout
     * @return the mapped layout
     */
    private static mapLayout(layout: Array&lt;LayoutItem&gt;, fn: (v: any, i?: number, l?: any, p?: any) &#x3D;&gt; LayoutItem,
        layoutPointer: string|Array&lt;string&gt; &#x3D; &#x27;&#x27;, rootLayout: Array&lt;LayoutItem&gt; &#x3D; layout): Array&lt;LayoutItem&gt; {
        const indexPad &#x3D; 0;

        return layout.reduce((mappedLayout: Array&lt;LayoutItem&gt;, item: LayoutItem, index: number) &#x3D;&gt; {
            const realIndex: number &#x3D; +index + indexPad;
            const newLayoutPointer &#x3D; &#x60;${layoutPointer}/${realIndex}&#x60;;
            let newNode: LayoutItem &#x3D; clone(item);
            let newLayout: Array&lt;LayoutItem&gt; &#x3D; mappedLayout;
            // Note: removed logic to convert tabs to items and items to [items]
            // if (item.items) {
            //     newNode.items &#x3D; LayoutService.mapLayout(item.items, fn, &#x60;${newLayoutPointer}/items&#x60;, rootLayout);
            // }
            newNode &#x3D; fn(newNode, realIndex, newLayoutPointer, rootLayout);
            // if (isNil(newNode)) {
            //     indexPad -&#x3D; 1;
            // } else {
            //     if (Array.isArray(newNode)) { indexPad +&#x3D; newNode.length - 1; }
                newLayout &#x3D; mappedLayout.concat(newNode);
            // }

            return newLayout;
        }, []);
    }
}
</code></pre>
    </div>

</div>











                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'LayoutService.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
